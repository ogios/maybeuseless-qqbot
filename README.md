# selfuse-qqbot-nonebot2

> 需要node环境和pyexecjs库

机器人基于 [nonebot2](https://github.com/nonebot/nonebot2) 和 [go-cqhttpd](https://github.com/Mrs4s/go-cqhttp) 框架所搭建  
服务器基于javaservlet写的，机器人和服务器之间通过socket通信



- **图片翻译功能**  
  - OCR和翻译并不是我自己实现的，用的是有道的接口(我也是从别人那的代码看到的这个接口)
  - 该接口没有任何加密参数，可能是根据请求频率封ip来防止过度请求，不过我没试过
  - 使用方法:
    - 
    - 发送 `/trans` 后将该用户qq号标记，在5分钟内发送图片即可翻译，翻译后标记取消(即一次 `/trans` 只能翻译一张图片)。一条消息中包含多个图片也只能翻译第一张，可以自己修改。  
    - 在群组中发送 `/trans` 后再私聊发送图片可以把翻译后的图片以私聊的方式返回，当然私聊发送指令也是可以的。  
    - 5分钟后还没发送图片会取消标记。


- **发送容易被qq封禁的图片**
  - 这个需要公网ip，因为是访问网页上的图片。我用的是阿里云的轻量服务器
  - 使用方法:
    -
    - 发送 `/ticket-gen` 后机器人生成随机字符串和超时时间发送给服务器，服务器从资源文件夹(个人设置的是 `/root/resources/web/` )里随机标记一张图片，机器人返回带有ticket参数的url和其过期时间。  
    - 过期时间5分钟，5分钟内都可以访问该url查看内容，5分钟后再访问即失效，时间可以设置，在bot通过socket发送参数给服务器之前可以设置，如果是在群组中并且给了机器人管理员，失效后url的消息会被撤回

- **ChatGPT**
  - 本人注册了账号但这里的不是我自己的账号，用的是逆向了一位站长提供的免费chatgpt的网页接口: [AI CHAT公益站](https://chatgpt.sbaliyun.com/) 有能力可以去支持一下
  - 这个现在已经基本不抱希望可以用，因为经常崩，站长也经常欠费，可以换成自己的
  - 需要node环境加载和运行crypto-js，也可以自己把这个js文件下下来直接用
  - 使用方法:
    - 
    - 在群组中 `@机器人` 并发送内容即可对话，私聊使用 `/chat` 后写上内容就行
    - 发送后机器人会立刻返回 `正在思考中` 内容获取后会撤回该句，可能会请求失败，重试次数5次可以自己设置，请求多了会被封一小段时间
